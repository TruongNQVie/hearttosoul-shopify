<div class="header-wrapper">
  <header class="header container">
    <!-- Mobile Menu Toggle -->
    <button class="header__icon header__menu-toggle" aria-label="Menu" data-mobile-menu-toggle>
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
    </button>

    <!-- Logo -->
    <a href="{{ routes.root_url }}" class="header__logo">
      <img src="{{ 'logo.png' | asset_url }}" alt="{{ shop.name }}" class="header__logo-img" loading="eager">
      <div class="header__logo-text">
        <span class="header__logo-name">Heart <em>to</em> Soul</span>
        <span class="header__logo-tagline">WHERE LOVE FINDS ITS VOICE</span>
      </div>
    </a>

    <!-- Desktop Navigation -->
    <nav class="header__nav">
      {%- for link in section.settings.menu.links -%}
        <div class="header__nav-item">
          <a href="{{ link.url }}">{{ link.title }}</a>
          {%- if link.links != blank -%}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
            <div class="header__dropdown">
              {%- for child_link in link.links -%}
                <a href="{{ child_link.url }}">{{ child_link.title }}</a>
              {%- endfor -%}
            </div>
          {%- endif -%}
        </div>
      {%- endfor -%}
    </nav>

    <!-- Icons -->
    <div class="header__icons">
      <a href="{{ routes.search_url }}" class="header__icon" aria-label="Search">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
      </a>
      <a href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}" class="header__icon" aria-label="Account">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </a>
      <a href="{{ routes.cart_url }}" class="header__icon" aria-label="Cart">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        {%- if cart != empty -%}
          <span class="cart-count-badge" data-cart-count>{{ cart.item_count }}</span>
        {%- endif -%}
      </a>
    </div>
  </header>
</div>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobile-menu">
  <div class="mobile-menu__overlay" data-mobile-menu-close></div>
  <div class="mobile-menu__drawer">
    <button class="mobile-menu__close" data-mobile-menu-close aria-label="Close menu">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
    </button>
    <nav class="mobile-menu__nav">
      {%- for link in section.settings.menu.links -%}
        <a href="{{ link.url }}">{{ link.title }}</a>
        {%- for child_link in link.links -%}
          <a href="{{ child_link.url }}" style="padding-left:16px; font-size:14px; color:var(--color-text-muted);">{{ child_link.title }}</a>
        {%- endfor -%}
      {%- endfor -%}
    </nav>
  </div>
</div>

{% schema %}
{
  "name": "Header",
  "class": "section-header",
  "settings": [
    {
      "type": "link_list",
      "id": "menu",
      "default": "main-menu",
      "label": "Menu"
    }
  ]
}
{% endschema %}

<style>
  .section-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--color-bg);
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  }
</style>
