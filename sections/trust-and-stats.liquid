<section class="trust-and-stats section-padding">
  <div class="container">
    {%- if section.settings.heading != blank -%}
      <div class="section-title">
        <h2>{{ section.settings.heading }}</h2>
        {%- if section.settings.subtitle != blank -%}
          <p>{{ section.settings.subtitle }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}
    <div class="trust-and-stats__grid">
      <div class="trust-badge-card">
        <div class="trust-badge-card__icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="3" width="15" height="13" rx="2" ry="2"/><path d="M16 8h4l3 5v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
        </div>
        <h3 class="trust-badge-card__title">Free Shipping</h3>
        <p class="trust-badge-card__text">On all USA orders</p>
      </div>
      <div class="trust-badge-card">
        <div class="trust-badge-card__icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>
        </div>
        <h3 class="trust-badge-card__title">Lifetime Warranty</h3>
        <p class="trust-badge-card__text">We stand behind our craft</p>
      </div>
      <div class="trust-badge-card">
        <div class="trust-badge-card__icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <h3 class="trust-badge-card__title">Secure Checkout</h3>
        <p class="trust-badge-card__text">SSL encrypted payments</p>
      </div>
      <div class="trust-badge-card">
        <div class="trust-badge-card__icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        </div>
        <h3 class="trust-badge-card__title">24/7 Support</h3>
        <p class="trust-badge-card__text">Always here for you</p>
      </div>
    </div>
    
    <div class="trust-and-stats__divider">
      <p class="trust-and-stats__note">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 12 2 2 4-4"/><circle cx="12" cy="12" r="10"/></svg>
        {{ section.settings.note }}
      </p>
    </div>

    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-item__number"><span class="stat-number-animate" data-target="10000" data-suffix="+">0</span></div>
        <div class="stat-item__label">GIFTS DELIVERED</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__number"><span class="stat-number-animate" data-target="8500" data-suffix="+">0</span></div>
        <div class="stat-item__label">HAPPY CUSTOMERS</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__number"><span class="stat-number-animate" data-target="50" data-suffix="+">0</span></div>
        <div class="stat-item__label">COUNTRIES REACHED</div>
      </div>
      <div class="stat-item">
        <div class="stat-item__number"><span class="stat-number-animate" data-target="4.9" data-suffix="â˜…" data-decimals="1">0.0</span></div>
        <div class="stat-item__label">AVERAGE RATING</div>
      </div>
    </div>
  </div>
</section>

<style>
  .trust-and-stats {
    background: var(--color-bg-warm);
    position: relative;
    padding: 80px 0;
  }
  .trust-and-stats::before {
    content: '';
    position: absolute;
    top: 0; left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 1000px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(190,52,78,0.1), transparent);
  }
  .section-title h2 { margin-bottom: 8px; }
  .section-title p { color: var(--color-text-muted); font-size: 15px; }
  
  .trust-and-stats__grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 32px 20px;
    margin-top: 50px;
  }
  @media (min-width: 750px) { .trust-and-stats__grid { grid-template-columns: repeat(4, 1fr); gap: 40px; } }
  
  .trust-badge-card {
    text-align: center;
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  .trust-badge-card:hover {
    transform: translateY(-5px);
  }
  .trust-badge-card__icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: #FDF4F5;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: var(--color-primary);
    box-shadow: 0 4px 14px rgba(190,52,78,0.06);
    transition: all 0.3s;
  }
  .trust-badge-card:hover .trust-badge-card__icon {
    background: var(--color-primary);
    color: var(--color-white);
    box-shadow: 0 8px 20px rgba(190,52,78,0.15);
  }
  .trust-badge-card__icon svg { width: 26px; height: 26px; }
  .trust-badge-card__title {
    font-family: var(--font-body);
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 6px;
    color: var(--color-text);
  }
  .trust-badge-card__text {
    font-size: 13px;
    color: var(--color-text-muted);
    line-height: 1.5;
  }

  .trust-and-stats__divider {
    border-top: 1px solid rgba(0,0,0,0.04);
    border-bottom: 1px solid rgba(0,0,0,0.04);
    margin: 60px 0;
    padding: 16px 0;
    text-align: center;
    background: linear-gradient(90deg, transparent, rgba(0,0,0,0.01), transparent);
  }
  .trust-and-stats__note {
    font-size: 12px;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin: 0;
    font-weight: 500;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 40px 20px;
    text-align: center;
  }
  @media (min-width: 750px) {
    .stats-grid { grid-template-columns: repeat(4, 1fr); gap: 40px; }
  }
  .stat-item {
    padding: 20px 0;
  }
  .stat-item__number {
    font-family: var(--font-heading);
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 600;
    color: var(--color-text);
    line-height: 1;
    margin-bottom: 12px;
    font-style: italic;
  }
  .stat-number-animate {
    background: linear-gradient(135deg, var(--color-primary), #E91E8C);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: inline-block;
  }
  .stat-item__label {
    font-size: 11px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--color-text-muted);
    font-weight: 600;
  }
</style>

{% schema %}
{
  "name": "Trust & Stats",
  "settings": [
    { "type": "text", "id": "heading", "default": "Why Choose Heart To Soul?", "label": "Heading" },
    { "type": "text", "id": "subtitle", "default": "Crafted with love, backed by our promise.", "label": "Subtitle" },
    { "type": "text", "id": "note", "default": "Trusted by 10,000+ happy customers across the USA", "label": "Middle note" }
  ],
  "presets": [
    {
      "name": "Trust & Stats"
    }
  ]
}
{% endschema %}

<script>
document.addEventListener("DOMContentLoaded", () => {
  const stats = document.querySelectorAll('.stat-number-animate');
  if(!stats.length) return;

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const target = entry.target;
        const endValue = parseFloat(target.getAttribute('data-target'));
        const isDecimal = target.hasAttribute('data-decimals');
        const suffix = target.getAttribute('data-suffix') || '';
        const duration = 2000;
        const startTime = performance.now();
        
        const updateCount = (currentTime) => {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const easeProgress = 1 - Math.pow(1 - progress, 3); // Cubic ease out
          
          let currentVal = easeProgress * endValue;
          
          if(isDecimal) {
            target.innerText = currentVal.toFixed(1) + suffix;
          } else {
            // format with commas
            target.innerText = Math.floor(currentVal).toLocaleString('en-US') + suffix;
          }
          
          if (progress < 1) {
            requestAnimationFrame(updateCount);
          } else {
            if(isDecimal) {
              target.innerText = endValue.toFixed(1) + suffix;
            } else {
              target.innerText = endValue.toLocaleString('en-US') + suffix;
            }
          }
        };
        requestAnimationFrame(updateCount);
        observer.unobserve(target);
      }
    });
  }, { threshold: 0.5 });
  
  stats.forEach(stat => observer.observe(stat));
});
</script>
