<section class="main-product">
  <div class="product-container">
    <!-- Breadcrumbs -->
    <nav class="product-breadcrumbs">
      <a href="/">Home</a>
      <span>‚Ä∫</span>
      {%- if product.collections.size > 0 -%}
        <a href="{{ product.collections.first.url }}">{{ product.collections.first.title }}</a>
        <span>‚Ä∫</span>
      {%- endif -%}
      <span>{{ product.title | truncate: 50 }}</span>
    </nav>

    <!-- Two-column Product Hero -->
    <div class="product-hero">
      <!-- LEFT: Image Gallery (wider) -->
      <div class="product-gallery">
        <div class="product-gallery__thumbs">
          {%- for image in product.images -%}
            <div class="product-gallery__thumb {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}" data-full="{{ image | image_url: width: 900 }}">
              <img src="{{ image | image_url: width: 150 }}" alt="{{ image.alt | default: product.title }}" loading="lazy">
            </div>
          {%- endfor -%}
        </div>
        <div class="product-gallery__main">
          <div class="product-gallery__zoom-container">
            {%- if product.featured_image != blank -%}
              <img id="product-main-image" src="{{ product.featured_image | image_url: width: 900 }}" alt="{{ product.title }}">
            {%- else -%}
              {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
            {%- endif -%}
          </div>
        </div>
      </div>

      <!-- RIGHT: Product Info (narrower, sticky) -->
      <div class="product-info" id="product-info-col">
        <div class="product-info__scroll">
          <!-- Social proof bar -->
          <div class="product-social-proof">
            <span class="proof-avatars">
              <span class="proof-avatar" style="background:#e8a87c;">S</span>
              <span class="proof-avatar" style="background:#d4a5a5;">M</span>
            </span>
            <span class="proof-text"><strong>sarah.m</strong> ‚úì , <strong>mike.t</strong> ‚úì and <strong class="proof-highlight">8,247</strong> others carry our products.</span>
          </div>

          <!-- Title -->
          <h1 class="product-title">{{ product.title }}</h1>

          <!-- Rating -->
          <div class="product-rating">
            <span class="rating-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <span class="rating-score">4.9</span>
            <span class="rating-count">(778)</span>
          </div>

          <!-- Price -->
          <div class="product-price">
            <span class="price-current">{{ product.price | money }}</span>
            {%- if product.compare_at_price > product.price -%}
              <span class="price-compare">{{ product.compare_at_price | money }}</span>
            {%- endif -%}
          </div>

          {%- if product.compare_at_price > product.price -%}
            {%- assign savings = product.compare_at_price | minus: product.price -%}
            <div class="product-savings-badge">
              üéâ You save: <strong>{{ savings | money }}</strong> ‚Äî Buy 1 Get 1 50% OFF!
            </div>
          {%- endif -%}

          <!-- Installments -->
          <p class="product-installment">Or 4 interest-free payments of <strong>{{ product.price | divided_by: 4 | money }}</strong> with <strong>Klarna</strong> ¬∑ <strong>Afterpay</strong></p>

          <!-- Short Description -->
          <div class="product-short-desc">
            <p>Finding a gift that says "I love you" shouldn't feel ordinary. Give her an unforgettable unboxing experience that speaks exactly what's in your heart.</p>
          </div>

          <!-- Feature highlights -->
          <div class="product-features">
            <div class="product-feature">
              <span class="feature-icon">üéÅ</span>
              <div><strong>2-in-1 Surprise:</strong> A luxury apple jewelry box revealing a hidden clover necklace.</div>
            </div>
            <div class="product-feature">
              <span class="feature-icon">üåπ</span>
              <div><strong>Eternal Rose:</strong> Handcrafted from scented soap‚Äîsymbolizing a love that never fades and fills the room with fragrance.</div>
            </div>
            <div class="product-feature">
              <span class="feature-icon">‚ú®</span>
              <div><strong>Ready to Gift:</strong> Includes a deeply emotional "To My Love" message card.</div>
            </div>
          </div>

          <!-- Variant selector -->
          {%- if product.variants.size > 1 -%}
            <div class="product-variants">
              <p class="variant-label">Select Color: <strong id="variant-name" style="color:var(--color-primary);">{{ product.selected_or_first_available_variant.title }}</strong></p>
              <div class="variant-options">
                {%- for variant in product.variants -%}
                  <label class="variant-option {% if variant == product.selected_or_first_available_variant %}active{% endif %}" data-variant-id="{{ variant.id }}" data-variant-title="{{ variant.title }}" data-variant-price="{{ variant.price | money }}" {% if variant.image %}data-variant-image="{{ variant.image | image_url: width: 900 }}"{% endif %}>
                    <input type="radio" name="variant" value="{{ variant.id }}" {% if variant == product.selected_or_first_available_variant %}checked{% endif %}>
                    {%- if variant.image -%}
                      <img src="{{ variant.image | image_url: width: 160 }}" alt="{{ variant.title }}">
                    {%- else -%}
                      <span>{{ variant.title }}</span>
                    {%- endif -%}
                  </label>
                {%- endfor -%}
              </div>
            </div>
          {%- endif -%}

          <!-- Shipping timer -->
          <div class="product-shipping-card">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
            <span>Order in the next <strong id="shipping-timer">2h 15m</strong> for delivery by <strong id="shipping-date"></strong></span>
          </div>

          <!-- Free shipping countdown -->
          <div class="product-countdown">
            <div class="countdown-icon">üöö</div>
            <div class="countdown-text">
              <strong>FREE SHIPPING</strong> ends in:
              <span class="countdown-timer" id="free-ship-timer">
                <span class="countdown-unit"><span id="cd-hours">23</span>h</span>
                <span class="countdown-unit"><span id="cd-mins">59</span>m</span>
                <span class="countdown-unit"><span id="cd-secs">59</span>s</span>
              </span>
            </div>
          </div>

          <!-- Quantity + Add to Cart (sticky in column) -->
          <div class="product-purchase" id="product-purchase-area">
            <div class="product-qty-row">
              <label class="qty-label">Qty:</label>
              <div class="product-qty">
                <button type="button" class="qty-btn" onclick="changeProductQty(-1)">‚àí</button>
                <input type="number" id="product-qty-input" value="1" min="1" max="10">
                <button type="button" class="qty-btn" onclick="changeProductQty(1)">+</button>
              </div>
            </div>

            {%- form 'product', product, class: 'product-form' -%}
              <input type="hidden" name="id" id="product-variant-id" value="{{ product.selected_or_first_available_variant.id }}">
              <input type="hidden" name="quantity" id="product-qty-hidden" value="1">
              <button type="submit" class="product-form__submit" {% unless product.available %}disabled{% endunless %}>
                {%- if product.available -%}
                  ‚ô° GIFT YOUR ENDLESS LOVE ‚Äî <span id="cta-price">{{ product.price | money }}</span>
                {%- else -%}
                  Sold Out
                {%- endif -%}
              </button>
            {%- endform -%}

            {%- if product.compare_at_price > product.price -%}
              <p class="product-savings-below">üéâ <span style="color:var(--color-primary); font-weight:600;">You save: {{ savings | money }} ‚Äî Buy 1 Get 1 50% OFF!</span></p>
            {%- endif -%}

            <p class="product-gift-hint">üéÅ <a href="#" style="color:var(--color-primary); font-weight:600; text-decoration:none;">Gift Hint for Loved Ones</a></p>
          </div>

          <!-- Trust badges -->
          <div class="product-trust">
            <div class="trust-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
              <span>Free US Shipping</span>
            </div>
            <div class="trust-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              <span>Lifetime Warranty</span>
            </div>
            <div class="trust-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
              <span>30-Day Returns</span>
            </div>
            <div class="trust-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary)" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              <span>Secure Checkout</span>
            </div>
          </div>

          <!-- Accordions -->
          <div class="product-accordions">
            <details class="product-accordion">
              <summary>Materials & Care</summary>
              <div class="accordion-content">
                <p>‚Ä¢ Premium scented soap rose ‚Äî lasts indefinitely with gentle care</p>
                <p>‚Ä¢ 14K gold/white gold plated necklace ‚Äî tarnish-resistant</p>
                <p>‚Ä¢ Luxury apple-shaped jewelry box ‚Äî handcrafted with love</p>
                <p>‚Ä¢ Keep away from water and direct sunlight for lasting beauty</p>
              </div>
            </details>
            <details class="product-accordion">
              <summary>Shipping & Returns</summary>
              <div class="accordion-content">
                <p>‚Ä¢ Free standard shipping across the USA (5-10 business days)</p>
                <p>‚Ä¢ Express shipping available at checkout</p>
                <p>‚Ä¢ Easy 30-day return policy ‚Äî no questions asked</p>
                <p>‚Ä¢ Items must be in original packaging</p>
              </div>
            </details>
            <details class="product-accordion">
              <summary>Current Shipping Times</summary>
              <div class="accordion-content">
                <p>‚Ä¢ <strong>USA:</strong> 5‚Äì10 business days (Free)</p>
                <p>‚Ä¢ <strong>Canada:</strong> 7‚Äì14 business days</p>
                <p>‚Ä¢ <strong>UK/Europe:</strong> 10‚Äì18 business days</p>
                <p>‚Ä¢ <strong>Australia:</strong> 10‚Äì20 business days</p>
                <p>‚Ä¢ Orders placed before 2PM ET ship same day</p>
              </div>
            </details>
            <details class="product-accordion">
              <summary>Product Information</summary>
              <div class="accordion-content">
                <p>‚Ä¢ <strong>Package includes:</strong> 1√ó Apple jewelry box, 1√ó Eternal Rose, 1√ó Necklace, 1√ó Message card</p>
                <p>‚Ä¢ <strong>Box dimensions:</strong> Approx. 3.5" √ó 3.5" √ó 3.5"</p>
                <p>‚Ä¢ <strong>Chain length:</strong> 18" adjustable clavicle chain</p>
                <p>‚Ä¢ <strong>Material:</strong> 14K gold/white gold plated alloy</p>
              </div>
            </details>
            <details class="product-accordion">
              <summary>Special Offers!</summary>
              <div class="accordion-content">
                <p>üéâ <strong>Buy 1 Get 1 50% OFF</strong> ‚Äî automatically applied at checkout</p>
                <p>üöö <strong>Free US Shipping</strong> ‚Äî on all orders, no minimum</p>
                <p>üíù <strong>Free Gift Wrapping</strong> ‚Äî beautifully packaged, ready to gift</p>
                <p>üîí <strong>Lifetime Warranty</strong> ‚Äî we stand behind every piece</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- The Story Behind the Gift -->
  <div class="product-story">
    <div class="product-story__inner">
      <div class="story-icon">‚ô°</div>
      <h2 class="story-title">The Story Behind the Gift</h2>
      <div class="story-divider"></div>
      <div class="story-text">
        <p>At first glance, it is a beautifully crafted, vibrant Red Apple‚Äîa timeless symbol of temptation, romance, and devotion. But the true magic happens when she opens it.</p>
        <p>Inside blooms a stunning, handcrafted Eternal Rose. Unlike real flowers that quickly wither, this masterpiece is delicately sculpted from premium, fragrant soap. It not only looks as though it was just carefully selected from a lush garden, but it also fills the room with a soft, romantic scent that lasts indefinitely.</p>
      </div>
      <div class="story-highlight">
        <h3>üíï The Hidden Gem</h3>
        <p>Beneath the eternal rose lies a secret drawer. Pull it gently to reveal a dazzling clavicle chain necklace resting on a deeply emotional message card.</p>
      </div>
      <div class="story-message">
        <p class="message-text"><em>"I am not perfect. I annoy you, forget stuff, say stupid things and more... But you will never find someone who loves you like I do. I LOVE YOU FOREVER."</em></p>
      </div>
    </div>
  </div>
</section>

<!-- Sticky bottom bar (full-width, shows on scroll) -->
<div class="product-sticky-bar" id="product-sticky-bar">
  <div class="sticky-bar__inner">
    {%- if product.compare_at_price > product.price -%}
      <p class="sticky-bar__savings">üéâ <span style="color:var(--color-primary); font-weight:600;">You save: {{ savings | money }} ‚Äî Buy 1 Get 1 50% OFF!</span></p>
    {%- endif -%}
    <div class="sticky-bar__content">
      <div class="sticky-bar__info">
        <p class="sticky-bar__title">{{ product.title | truncate: 45 }}</p>
        <p class="sticky-bar__price">{{ product.price | money }}</p>
      </div>
      <div class="sticky-bar__qty">
        <button class="qty-btn" onclick="changeStickyQty(-1)">‚àí</button>
        <input type="number" id="sticky-qty" value="1" min="1" max="10">
        <button class="qty-btn" onclick="changeStickyQty(1)">+</button>
      </div>
      <button class="sticky-bar__buy" onclick="document.querySelector('.product-form__submit').click();">
        ‚ô° GIFT YOUR ENDLESS LOVE ‚Äî <span id="sticky-cta-price">{{ product.price | money }}</span>
      </button>
    </div>
    <p class="sticky-bar__gift-hint">üéÅ <a href="#" style="color:var(--color-primary); text-decoration:none; font-weight:600;">Gift Hint for Loved Ones</a></p>
  </div>
</div>


<style>
  /* ===== PRODUCT CONTAINER ===== */
  .product-container { max-width: 1400px; margin: 0 auto; padding: 0 24px; }
  .product-breadcrumbs { padding: 14px 0; font-size: 13px; color: var(--color-text-muted); }
  .product-breadcrumbs a { color: var(--color-text-muted); text-decoration: none; }
  .product-breadcrumbs a:hover { color: var(--color-primary); }

  /* ===== HERO: 60/40 split ===== */
  .product-hero { display: grid; grid-template-columns: 1fr; gap: 32px; padding-bottom: 60px; align-items: start; }
  @media (min-width: 900px) {
    .product-hero { grid-template-columns: 3fr 2fr; gap: 40px; }
  }

  /* ===== GALLERY ===== */
  .product-gallery { display: flex; gap: 12px; }
  .product-gallery__thumbs {
    display: flex; flex-direction: column; gap: 8px;
    flex-shrink: 0; width: 72px;
    max-height: 700px; overflow-y: auto;
  }
  .product-gallery__thumbs::-webkit-scrollbar { width: 3px; }
  .product-gallery__thumbs::-webkit-scrollbar-thumb { background: var(--color-border); border-radius: 2px; }
  .product-gallery__thumb {
    border: 2px solid transparent; border-radius: 10px;
    overflow: hidden; cursor: pointer; transition: border-color 0.2s;
    aspect-ratio: 1 / 1; /* SQUARE thumbnails */
  }
  .product-gallery__thumb.active { border-color: var(--color-primary); }
  .product-gallery__thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .product-gallery__main {
    flex: 1; border-radius: 16px; overflow: hidden;
    background: var(--color-bg-warm); position: relative;
    /* Center the image if it doesn't fill the box */
    display: flex; align-items: center; justify-content: center;
  }
  .product-gallery__zoom-container {
    overflow: hidden; cursor: zoom-in; position: relative;
    width: 100%; border-radius: 16px; display: flex; align-items: center; justify-content: center;
  }
  .product-gallery__zoom-container img {
    max-width: 100%; max-height: 100%; object-fit: contain; display: block;
    transition: transform 0.1s ease-out; border-radius: 16px;
    transform-origin: center center;
  }
  .product-gallery__zoom-container:hover img { 
    transform: scale(1.5); 
    transition: transform 0.2s ease-out;
  }

  /* ===== PRODUCT INFO ===== */
  .product-info { position: relative; }
  @media (min-width: 900px) {
    .product-info__scroll {
      position: sticky; top: 80px;
      max-height: calc(100vh - 100px); overflow-y: auto;
      padding-right: 8px;
    }
    .product-info__scroll::-webkit-scrollbar { width: 3px; }
    .product-info__scroll::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 2px; }
  }

  /* Social proof - more prominent */
  .product-social-proof {
    display: flex; align-items: center; gap: 10px;
    background: rgba(190,52,78,0.06); border: 1px solid rgba(190,52,78,0.12);
    border-radius: 50px; padding: 10px 18px; margin-bottom: 20px; font-size: 13px;
  }
  .proof-avatars { display: flex; }
  .proof-avatar {
    width: 30px; height: 30px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    color: white; font-weight: 700; font-size: 12px;
    margin-right: -8px; border: 2px solid white;
  }
  .proof-text { margin-left: 10px; }
  .proof-highlight { color: var(--color-primary); font-size: 14px; }

  /* Title */
  .product-title {
    font-family: var(--font-heading);
    font-size: clamp(1.5rem, 2.5vw, 2rem);
    line-height: 1.3; margin-bottom: 8px;
  }

  /* Rating */
  .product-rating { display: flex; align-items: center; gap: 6px; margin-bottom: 12px; }
  .rating-stars { color: #f5a623; font-size: 18px; letter-spacing: 1px; }
  .rating-score { font-weight: 700; font-size: 15px; }
  .rating-count { color: var(--color-text-muted); font-size: 14px; }

  /* Price */
  .product-price { display: flex; align-items: baseline; gap: 12px; margin-bottom: 6px; }
  .price-current { font-size: 28px; font-weight: 700; }
  .price-compare { font-size: 18px; color: var(--color-text-muted); text-decoration: line-through; }
  .product-savings-badge {
    background: linear-gradient(135deg, rgba(190,52,78,0.08), rgba(190,52,78,0.04));
    border: 1px solid rgba(190,52,78,0.15); color: var(--color-primary);
    font-size: 13px; font-weight: 600; padding: 8px 14px;
    border-radius: 8px; margin-bottom: 12px;
  }
  .product-installment { font-size: 13px; color: var(--color-text-muted); margin-bottom: 16px; }

  /* Short desc */
  .product-short-desc { color: var(--color-text-muted); font-size: 14px; line-height: 1.7; margin-bottom: 16px; }

  /* Features - white bg, clear contrast */
  .product-features {
    background: #ffffff; border: 1px solid rgba(0,0,0,0.08);
    border-radius: 12px; padding: 18px 20px; margin-bottom: 20px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.03);
  }
  .product-feature { display: flex; gap: 12px; margin-bottom: 12px; font-size: 14px; line-height: 1.5; }
  .product-feature:last-child { margin-bottom: 0; }
  .feature-icon { font-size: 18px; flex-shrink: 0; margin-top: 1px; }

  /* Variants - 2x larger */
  .product-variants { margin-bottom: 20px; }
  .variant-label { font-size: 14px; margin-bottom: 10px; }
  .variant-options { display: flex; gap: 12px; }
  .variant-option {
    border: 2px solid var(--color-border); border-radius: 12px;
    overflow: hidden; cursor: pointer;
    width: 80px; height: 80px;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }
  .variant-option:hover { border-color: rgba(190,52,78,0.4); }
  .variant-option.active { border-color: var(--color-primary); box-shadow: 0 0 0 1px var(--color-primary); }
  .variant-option img { width: 100%; height: 100%; object-fit: cover; }
  .variant-option input { display: none; }

  /* Shipping timer card */
  .product-shipping-card {
    display: flex; align-items: center; gap: 8px;
    font-size: 13px; color: var(--color-text-muted);
    border: 1px solid var(--color-border); border-radius: 10px;
    padding: 12px 16px; margin-bottom: 12px;
    background: rgba(0,0,0,0.01);
  }

  /* Free shipping countdown */
  .product-countdown {
    display: flex; align-items: center; gap: 10px;
    background: linear-gradient(135deg, #fff3e0, #fff8f0);
    border: 1px solid #ffe0b2; border-radius: 10px;
    padding: 12px 16px; margin-bottom: 20px; font-size: 13px;
  }
  .countdown-icon { font-size: 20px; }
  .countdown-timer { display: inline-flex; gap: 4px; margin-left: 6px; }
  .countdown-unit {
    background: var(--color-text); color: white;
    padding: 2px 6px; border-radius: 4px; font-weight: 700; font-size: 12px;
  }

  /* QTY + Purchase area */
  .product-purchase { margin-bottom: 20px; }
  .product-qty-row { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
  .qty-label { font-size: 14px; font-weight: 600; }
  .product-qty {
    display: flex; align-items: center;
    border: 1px solid var(--color-border); border-radius: 8px; overflow: hidden;
  }
  .product-qty .qty-btn {
    width: 38px; height: 38px; border: none; background: none;
    font-size: 18px; cursor: pointer; transition: background 0.2s;
  }
  .product-qty .qty-btn:hover { background: rgba(0,0,0,0.04); }
  .product-qty input {
    width: 44px; text-align: center; border: none;
    border-left: 1px solid var(--color-border);
    border-right: 1px solid var(--color-border);
    font-size: 14px; font-weight: 600;
  }

  /* CTA Button */
  .product-form { margin-bottom: 6px; }
  .product-form__submit {
    width: 100%; padding: 18px; font-size: 15px; font-weight: 700;
    letter-spacing: 0.03em; border-radius: 50px;
    background: var(--color-text); color: var(--color-white);
    border: none; cursor: pointer; transition: all 0.3s;
  }
  .product-form__submit:hover { opacity: 0.9; transform: translateY(-1px); box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
  .product-form__submit:disabled { background: #ccc; cursor: not-allowed; }
  .product-savings-below { text-align: center; font-size: 13px; margin-top: 6px; }
  .product-gift-hint { text-align: center; font-size: 13px; margin-top: 6px; }

  /* Trust badges - horizontal */
  .product-trust {
    display: flex; flex-wrap: wrap; gap: 0;
    margin: 16px 0; padding: 16px 0; border-top: 1px solid var(--color-border);
    border-bottom: 1px solid var(--color-border);
  }
  .trust-item {
    display: flex; align-items: center; gap: 6px;
    font-size: 12px; font-weight: 500; color: var(--color-text);
    width: 50%; padding: 6px 0;
  }

  /* Accordions */
  .product-accordions { }
  .product-accordion { border-bottom: 1px solid var(--color-border); }
  .product-accordion summary {
    padding: 14px 0; font-size: 14px; font-weight: 600;
    cursor: pointer; list-style: none;
    display: flex; justify-content: space-between; align-items: center;
  }
  .product-accordion summary::-webkit-details-marker { display: none; }
  .product-accordion summary::after { content: "+"; font-size: 18px; color: var(--color-text-muted); font-weight: 300; }
  .product-accordion[open] summary::after { content: "‚àí"; }
  .accordion-content { padding: 0 0 14px; font-size: 13px; color: var(--color-text-muted); line-height: 1.7; }
  .accordion-content p { margin-bottom: 4px; }

  /* ===== STORY SECTION ===== */
  .product-story {
    background: linear-gradient(180deg, rgba(248,245,240,0.4) 0%, rgba(248,245,240,1) 100%);
    padding: 80px 20px;
  }
  .product-story__inner { max-width: 700px; margin: 0 auto; text-align: center; }
  .story-icon { font-size: 28px; margin-bottom: 8px; color: var(--color-primary); }
  .story-title { font-family: var(--font-heading); font-size: clamp(1.8rem, 4vw, 2.6rem); margin-bottom: 12px; }
  .story-divider { width: 50px; height: 3px; background: var(--color-primary); margin: 0 auto 36px; border-radius: 2px; }
  .story-text { text-align: left; font-size: 15px; line-height: 1.9; color: var(--color-text-muted); margin-bottom: 28px; }
  .story-text p { margin-bottom: 18px; }
  .story-highlight {
    text-align: left; background: #fff;
    border: 1px solid rgba(0,0,0,0.06); border-radius: 14px;
    padding: 24px 28px; margin-bottom: 28px;
  }
  .story-highlight h3 { font-size: 17px; margin-bottom: 10px; }
  .story-highlight p { font-size: 14px; line-height: 1.7; color: var(--color-text-muted); }
  .story-message { padding: 28px; background: #fff; border-radius: 14px; box-shadow: 0 2px 16px rgba(0,0,0,0.04); }
  .message-text { font-family: var(--font-heading); font-size: 16px; line-height: 1.8; color: var(--color-text); }

  /* ===== STICKY BOTTOM BAR ===== */
  .product-sticky-bar {
    position: fixed; bottom: 0; left: 0; right: 0;
    background: rgba(255,255,255,0.98); backdrop-filter: blur(12px);
    border-top: 1px solid rgba(0,0,0,0.08);
    z-index: 999; transform: translateY(100%);
    transition: transform 0.35s ease; box-shadow: 0 -2px 20px rgba(0,0,0,0.06);
  }
  .product-sticky-bar.visible { transform: translateY(0); }
  .sticky-bar__inner { max-width: 1200px; margin: 0 auto; padding: 6px 20px 8px; }
  .sticky-bar__savings { text-align: center; font-size: 12px; padding: 2px 0; }
  .sticky-bar__content { display: flex; align-items: center; gap: 16px; }
  .sticky-bar__info { flex: 1; min-width: 0; }
  .sticky-bar__title { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .sticky-bar__price { font-size: 15px; font-weight: 700; }
  .sticky-bar__qty {
    display: flex; align-items: center;
    border: 1px solid var(--color-border); border-radius: 8px;
  }
  .sticky-bar__qty .qty-btn { width: 34px; height: 34px; border: none; background: none; font-size: 16px; cursor: pointer; }
  .sticky-bar__qty input { width: 34px; text-align: center; border: none; font-size: 13px; font-weight: 600; }
  .sticky-bar__buy {
    padding: 12px 24px; background: var(--color-text); color: white;
    border: none; border-radius: 50px; font-weight: 700; font-size: 13px;
    cursor: pointer; white-space: nowrap; transition: all 0.3s;
  }
  .sticky-bar__buy:hover { opacity: 0.9; }
  .sticky-bar__gift-hint { text-align: center; font-size: 11px; padding: 2px 0 0; }

  /* ===== MOBILE ===== */
  @media (max-width: 899px) {
    .product-gallery { flex-direction: column-reverse; }
    .product-gallery__thumbs { flex-direction: row; width: 100%; max-height: none; overflow-x: auto; }
    .product-gallery__thumb { width: 56px; height: 56px; flex-shrink: 0; }
    .sticky-bar__content { flex-wrap: wrap; }
    .sticky-bar__info { width: 100%; }
    .sticky-bar__buy { flex: 1; }
    .trust-item { width: 50%; font-size: 11px; }
  }
</style>

<script>
  // ===== Thumbnail click ‚Üí change main image =====
  document.querySelectorAll('.product-gallery__thumb').forEach(thumb => {
    thumb.addEventListener('click', function() {
      document.querySelectorAll('.product-gallery__thumb').forEach(t => t.classList.remove('active'));
      this.classList.add('active');
      const mainImg = document.getElementById('product-main-image');
      if (mainImg && this.dataset.full) {
        mainImg.src = this.dataset.full;
      }
    });
  });

  // ===== Variant selector ‚Üí update variant info =====
  document.querySelectorAll('.variant-option').forEach(option => {
    option.addEventListener('click', function() {
      document.querySelectorAll('.variant-option').forEach(o => o.classList.remove('active'));
      this.classList.add('active');
      const radio = this.querySelector('input');
      if (radio) radio.checked = true;
      document.getElementById('product-variant-id').value = this.dataset.variantId;
      const nameEl = document.getElementById('variant-name');
      if (nameEl) nameEl.textContent = this.dataset.variantTitle;
      if (this.dataset.variantImage) {
        document.getElementById('product-main-image').src = this.dataset.variantImage;
      }
    });
  });

  // ===== Interactive Hover Zoom (Follow Cursor) =====
  const zoomContainer = document.querySelector('.product-gallery__zoom-container');
  const zoomImg = document.getElementById('product-main-image');
  if (zoomContainer && zoomImg) {
    zoomContainer.addEventListener('mousemove', function(e) {
      const rect = zoomContainer.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      // Calculate percentage
      const xPercent = (x / rect.width) * 100;
      const yPercent = (y / rect.height) * 100;
      zoomImg.style.transformOrigin = `${xPercent}% ${yPercent}%`;
    });
    zoomContainer.addEventListener('mouseleave', function() {
      // Reset to center when mouse leaves
      zoomImg.style.transformOrigin = 'center center';
    });
  }

  // ===== Sticky bar visibility =====
  const stickyBar = document.getElementById('product-sticky-bar');
  const purchaseArea = document.getElementById('product-purchase-area');
  if (purchaseArea) {
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => stickyBar.classList.toggle('visible', !e.isIntersecting));
    }, { threshold: 0 });
    obs.observe(purchaseArea);
  }

  // ===== Quantity controls =====
  function changeProductQty(d) {
    const inp = document.getElementById('product-qty-input');
    let v = Math.max(1, Math.min(10, parseInt(inp.value) + d));
    inp.value = v;
    document.getElementById('product-qty-hidden').value = v;
    document.getElementById('sticky-qty').value = v;
  }
  function changeStickyQty(d) {
    const inp = document.getElementById('sticky-qty');
    let v = Math.max(1, Math.min(10, parseInt(inp.value) + d));
    inp.value = v;
    document.getElementById('product-qty-input').value = v;
    document.getElementById('product-qty-hidden').value = v;
  }

  // ===== Shipping date =====
  (function() {
    const d = new Date(); d.setDate(d.getDate() + 7);
    const el = document.getElementById('shipping-date');
    if (el) el.textContent = d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
  })();

  // ===== Free shipping countdown timer =====
  (function() {
    const now = new Date();
    const endOfDay = new Date(now);
    endOfDay.setHours(23, 59, 59, 999);
    function updateCountdown() {
      const now = new Date();
      const diff = endOfDay - now;
      if (diff <= 0) return;
      const h = Math.floor(diff / 3600000);
      const m = Math.floor((diff % 3600000) / 60000);
      const s = Math.floor((diff % 60000) / 1000);
      const hEl = document.getElementById('cd-hours');
      const mEl = document.getElementById('cd-mins');
      const sEl = document.getElementById('cd-secs');
      if (hEl) hEl.textContent = h;
      if (mEl) mEl.textContent = m < 10 ? '0' + m : m;
      if (sEl) sEl.textContent = s < 10 ? '0' + s : s;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();
  })();
</script>

{% schema %}
{
  "name": "Product Information",
  "settings": []
}
{% endschema %}
