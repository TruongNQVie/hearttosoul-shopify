<div class="product-card">
  <div class="product-card__media">
    <a href="{{ product.url }}" class="product-card__link" aria-label="{{ product.title }}"></a>
    
    <div class="product-card__badges">
      {%- if product.compare_at_price > product.price -%}
        <span class="product-card__badge badge-sale">Save {{ product.compare_at_price | minus: product.price | money_without_trailing_zeros }}</span>
      {%- else -%}
        {%- assign mod = product.id | modulo: 100 -%}
        {%- assign multiplier = 200 | plus: mod -%}
        {%- assign fake_compare_price = product.price | times: multiplier | divided_by: 100 -%}
        <span class="product-card__badge badge-sale">Save {{ fake_compare_price | minus: product.price | money_without_trailing_zeros }}</span>
      {%- endif -%}
    </div>

    {%- if product.featured_image != blank -%}
      <div class="product-card__image-wrapper">
        <img
          src="{{ product.featured_image | image_url: width: 800 }}"
          alt="{{ product.featured_image.alt | escape }}"
          loading="lazy"
          width="800"
          height="800"
          class="product-card__main-img"
        >
        {%- if product.images[1] != blank -%}
          <img
            src="{{ product.images[1] | image_url: width: 800 }}"
            alt="{{ product.images[1].alt | escape }}"
            loading="lazy"
            width="800"
            height="800"
            class="product-card__secondary-img"
          >
        {%- endif -%}
      </div>
    {%- else -%}
      {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg product-card__main-img' }}
    {%- endif -%}

    {%- unless product.available == false -%}
      <div class="product-card__quick-add">
        {%- form 'product', product -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          <button type="button" class="btn-quick-add" onclick="Shopify.theme.cart.add('{{ product.selected_or_first_available_variant.id }}', 1)" {% if product.available == false %}disabled{% endif %}>
            {%- if product.available -%}
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 01-8 0"></path></svg>
              Add to Bag
            {%- else -%}
              Sold Out
            {%- endif -%}
          </button>
        {%- endform -%}
      </div>
    {%- endunless -%}
  </div>

  <div class="product-card__info">
    <div class="product-card__rating">
      {%- assign rating_mod = product.id | modulo: 4 -%}
      {%- if rating_mod == 0 -%}{%- assign rating_num = "5.0" -%}{%- assign stars = "★★★★★" -%}
      {%- elsif rating_mod == 1 -%}{%- assign rating_num = "4.9" -%}{%- assign stars = "★★★★★" -%}
      {%- elsif rating_mod == 2 -%}{%- assign rating_num = "4.8" -%}{%- assign stars = "★★★★☆" -%}
      {%- else -%}{%- assign rating_num = "4.7" -%}{%- assign stars = "★★★★☆" -%}
      {%- endif -%}
      {%- assign review_count = product.id | modulo: 874 | plus: 128 -%}
      
      <span class="product-card__stars">{{ stars }}</span>
      <span class="product-card__rating-text">{{ rating_num }} ({{ review_count }})</span>
    </div>
    
    <a href="{{ product.url }}" class="product-card__title-link">
      <h3 class="product-card__title">{{ product.title }}</h3>
    </a>
    
    <div class="product-card__price-wrapper">
      <p class="product-card__price">
        <span class="price-current">{{ product.price | money }}</span>
        {%- if product.compare_at_price > product.price -%}
          <span class="price-compare">{{ product.compare_at_price | money }}</span>
        {%- else -%}
          {%- assign mod = product.id | modulo: 100 -%}
          {%- assign multiplier = 200 | plus: mod -%}
          {%- assign fake_compare_price = product.price | times: multiplier | divided_by: 100 -%}
          <span class="price-compare">{{ fake_compare_price | money }}</span>
        {%- endif -%}
      </p>
    </div>
    
    <p class="product-card__shipping">
      <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="3" width="15" height="13" rx="2"/><path d="M16 8h4l3 5v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg>
      Free US Shipping
    </p>
  </div>
</div>
